/**
 * Fritzguard Translation System
 * Supports: English (en), Dutch/Nederlands (nl), French (fr)
 */

const translations = {
    en: {
        // Navigation & Header
        "nav.menu": "Menu",
        "nav.home": "Home",
        "nav.story": "Story",
        "nav.dishes": "Dishes",
        "nav.jobs": "Jobs",
        "nav.locations": "Locations",
        "nav.contact": "Collaboration",
        "nav.order": "Order A Table",
        "nav.logo_sub_title": "The Order Of Taste",

        // Hero Section
        "hero.title": "Fritzguard",
        "hero.subtitle": "luxury frites",
        "hero.est": "Est.",
        "hero.year": "2022",

        // Story Section
        "story.heading": "our story",
        "story.title": "The Best In Belgium",
        "story.founding": "Born in 2022",
        "story.location": "in the heart of Brussels, facing the Bourse, Fritzguard Brussels is a family passion project.",
        "story.concept": "We envisioned a reimagined Belgian ğŸ‡§ğŸ‡ª cuisine built around a unique concept: loaded fries topped with great Belgian classics",
        "story.concept_end": "reinterpreted with precision and creativity.",
        "story.recipes": "Vol-au-vent, beef cheeks, LiÃ¨ge-style meatballs, moules-fritesâ€¦ and much more: each recipe was created, tested, and perfected over nearly two years, alongside experienced chefs.",
        "story.burgers": "Our menu also features premium burgers made with quality Angus beef and chicken, as well as vegetarian alternatives such as our cauliflower burgers, to satisfy every taste.",
        "story.quality": "At Fritzguard, everything is homemade, with no frozen products, using only fresh, local, and 100% Belgian ğŸ‡§ğŸ‡ª ingredients.",
        "story.design": "Designed in collaboration with renowned designers and architects, the project combines authenticity, modernity, and craftsmanship.",
        "story.today": "Today, Fritzguard has become a must-visit address in Brussels, with the ambition to grow while never betraying its DNA: quality above all.",
        "story.content": "Born in 2022, in the heart of Brussels, facing the Bourse, Fritzguard Brussels is a family passion project.<br><br>We envisioned a reimagined Belgian ğŸ‡§ğŸ‡ª cuisine built around a unique concept: loaded fries topped with great Belgian classics, reinterpreted with precision and creativity.<br><br>Vol-au-vent, beef cheeks, LiÃ¨ge-style meatballs, moules-fritesâ€¦ and much more: each recipe was created, tested, and perfected over nearly two years, alongside experienced chefs.<br><br>Our menu also features premium burgers made with quality Angus beef and chicken, as well as vegetarian alternatives such as our cauliflower burgers, to satisfy every taste.<br><br>At Fritzguard, everything is homemade, with no frozen products, using only fresh, local, and 100% Belgian ğŸ‡§ğŸ‡ª ingredients.<br><br>Designed in collaboration with renowned designers and architects, the project combines authenticity, modernity, and craftsmanship.<br><br>Today, Fritzguard has become a must-visit address in Brussels, with the ambition to grow while never betraying its DNA: quality above all.",

        // Menu Section
        "menu.label": "Menu",
        "menu.title": "signature dishes",
        "menu.button": "discover full menu",
        "menu.description": "Vol-au-vent, beef cheeks, LiÃ¨ge-style meatballs, moules-fritesâ€¦ and much more: each recipe was created, tested, and perfected over nearly two years, alongside experienced chefs.\n\nOur menu also features premium burgers made with quality Angus beef and chicken, as well as vegetarian alternatives such as our cauliflower burgers, to satisfy every taste.",

        // Jobs Section
        "jobs.heading": "Jobs",
        "jobs.title": "Join our Team",
        "jobs.paragraph1": "We're always looking for passionate individuals who share our commitment to excellence and quality. Whether you're a chef, kitchen staff, server, or part of our team, we believe in creating an environment where everyone can grow and thrive.",
        "jobs.paragraph2": "At Fritzguard, we don't just serve fritesâ€”we serve an experience. Join us and be part of a team that's dedicated to perfecting every detail, from sourcing the finest Belgian ğŸ‡§ğŸ‡ª ingredients to delivering exceptional service to our guests.",
        "jobs.interested": "Interested in joining our team?",
        "jobs.contact": "We'd love to hear from you! Feel free to reach out to us at",
        "jobs.phone": "+32 2 331 00 29",
        "jobs.or": "or",
        "jobs.sendInquiry": "send your inquiry to",
        "jobs.email": "beloria.contact@gmail.com",
        "jobs.closing": "Let's create something exceptional together!",

        // Collaboration Section
        "collab.heading": "COLLABORATION",
        "collab.title": "COLLABORATE WITH US",
        "collab.content": "Fritzguard is more than a restaurant, it's a modern Belgian ğŸ‡§ğŸ‡ª culinary concept built around signature frites and iconic classics. If you have collaboration ideas or proposals, feel free to contact us at: <br> +32 2 331 00 29<br />or<br /> beloria.contact@gmail.com",

        // Locations Section
        "locations.heading": "locations",
        "locations.title": "Visit Us",
        "locations.address": "Address",
        "locations.phone": "Phone",
        "locations.email": "Email",

        // Browser Title
        "browser.title": "Your frites are getting cold!",

        // Footer
        "footer.year": "All rights reserved",
        "footer.contact": "Contact",
        "footer.followUs": "Follow Us",

        // Accessibility
        "video.noSupport": "Your browser does not support the video tag."
    },

    nl: {
        // Navigation & Header
        "nav.menu": "Menu",
        "nav.home": "Startpagina",
        "nav.story": "Verhaal",
        "nav.dishes": "Gerechten",
        "nav.jobs": "Vacatures",
        "nav.locations": "Locaties",
        "nav.contact": "Samenwerking",
        "nav.order": "Reserveer Een Tafel",
        "nav.logo_sub_title": "De Orde van Smaak",


        // Hero Section
        "hero.title": "Fritzguard",
        "hero.subtitle": "luxe frites",
        "hero.est": "Est.",
        "hero.year": "2022",

        // Story Section
        "story.heading": "ons verhaal",
        "story.title": "Het Beste van BelgiÃ«",
        "story.founding": "Opgericht in 2022",
        "story.location": "in het hart van Brussel, tegenover de Beurs, is Fritzguard Brussel een familiepassieproject.",
        "story.concept": "We bedachten een vernieuwde Belgische ğŸ‡§ğŸ‡ª keuken rond een uniek concept: frietjes beladen met grote Belgische klassieken",
        "story.concept_end": "opnieuw geÃ¯nterpreteerd met precisie en creativiteit.",
        "story.recipes": "Vol-au-vent, runderangen, Luikse balletjes, moules-fritesâ€¦ en nog veel meer: elk recept werd bijna twee jaar lang gecreÃ«erd, getest en geperfectioneerd, samen met ervaren chefs.",
        "story.burgers": "Ons menu bevat ook premiumburgers van kwaliteit Angus-rundvlees en kip, evenals vegetarische alternatieven zoals onze bloemkoolburgers, om elke smaak tevreden te stellen.",
        "story.quality": "Bij Fritzguard is alles huisgemaakt, zonder bevroren producten, met alleen verse, lokale en 100% Belgische ğŸ‡§ğŸ‡ª ingrediÃ«nten.",
        "story.design": "Ontworpen in samenwerking met gerenommeerde ontwerpers en architecten, combineert het project authenticiteit, moderniteit en vakmanschap.",
        "story.today": "Vandaag is Fritzguard een must-visit-adres in Brussel geworden, met de ambitie om te groeien zonder zijn DNA te verraden: kwaliteit bovenal.",
        "story.content": "Opgericht in 2022, in het hart van Brussel, tegenover de Beurs, is Fritzguard Brussel een familiepassieproject.<br><br>We bedachten een vernieuwde Belgische ğŸ‡§ğŸ‡ª keuken rond een uniek concept: frietjes beladen met grote Belgische klassieken, opnieuw geÃ¯nterpreteerd met precisie en creativiteit.<br><br>Vol-au-vent, runderangen, Luikse balletjes, moules-fritesâ€¦ en nog veel meer: elk recept werd bijna twee jaar lang gecreÃ«erd, getest en geperfectioneerd, samen met ervaren chefs.<br><br>Ons menu bevat ook premiumburgers van kwaliteit Angus-rundvlees en kip, evenals vegetarische alternatieven zoals onze bloemkoolburgers, om elke smaak tevreden te stellen.<br><br>Bij Fritzguard is alles huisgemaakt, zonder bevroren producten, met alleen verse, lokale en 100% Belgische ğŸ‡§ğŸ‡ª ingrediÃ«nten.<br><br>Ontworpen in samenwerking met gerenommeerde ontwerpers en architecten, combineert het project authenticiteit, moderniteit en vakmanschap.<br><br>Vandaag is Fritzguard een must-visit-adres in Brussel geworden, met de ambitie om te groeien zonder zijn DNA te verraden: kwaliteit bovenal.",

        // Menu Section
        "menu.label": "Menu",
        "menu.title": "signature gerechten",
        "menu.button": "ontdek volledige menu",
        "menu.description": "Vol-au-vent, runderangen, Luikse balletjes, moules-fritesâ€¦ en nog veel meer: elk recept werd bijna twee jaar lang gecreÃ«erd, getest en geperfectioneerd, samen met ervaren chefs.\n\nOns menu bevat ook premiumburgers van kwaliteit Angus-rundvlees en kip, evenals vegetarische alternatieven zoals onze bloemkoolburgers, om elke smaak tevreden te stellen.",

        // Jobs Section
        "jobs.heading": "Vacatures",
        "jobs.title": "Sluit Je Bij Ons Team Aan",
        "jobs.paragraph1": "We zoeken altijd naar gepassioneerde personen die ons engagement voor excellentie en kwaliteit delen. Of je nu chef bent, keukenmedewerker, server of onderdeel van ons team, we geloven in het creÃ«ren van een omgeving waarin iedereen kan groeien en floreren.",
        "jobs.paragraph2": "Bij Fritzguard serveren we niet zomaar fritesâ€”we serveren een ervaring. Sluit je bij ons aan en maak deel uit van een team dat zich inzet voor het perfectioneren van elk detail, van het zoeken van de fijnste Belgische ğŸ‡§ğŸ‡ª ingrediÃ«nten tot het leveren van uitzonderlijke service aan onze gasten.",
        "jobs.interested": "GeÃ¯nteresseerd in het joinen van ons team?",
        "jobs.contact": "We horen graag van je! Voel je vrij om ons te bereiken op",
        "jobs.phone": "+32 2 331 00 29",
        "jobs.or": "of",
        "jobs.sendInquiry": "stuur je vraag naar",
        "jobs.email": "beloria.contact@gmail.com",
        "jobs.closing": "Laten we samen iets uitzonderlijks creÃ«ren!",

        // Collaboration Section
        "collab.heading": "SAMENWERKING",
        "collab.title": "WERK MET ONS SAMEN",
        "collab.content": "Fritzguard is meer dan een restaurant, het is een modern Belgisch ğŸ‡§ğŸ‡ª culinair concept gebouwd rond signatuur frietjes en iconische klassieken. Als je samenwerkingsideeÃ«n of voorstellen hebt, neem dan gerust contact met ons op: <br> +32 2 331 00 29<br />of<br /> beloria.contact@gmail.com",

        // Locations Section
        "locations.heading": "locaties",
        "locations.title": "Bezoek Ons",
        "locations.address": "Adres",
        "locations.phone": "Telefoonnummer",
        "locations.email": "E-mailadres",

        // Browser Title
        "browser.title": "Je frites worden koud!",

        // Footer
        "footer.year": "Alle rechten voorbehouden",
        "footer.contact": "Contact",
        "footer.followUs": "Volg Ons",

        // Accessibility
        "video.noSupport": "Je browser ondersteunt de videotag niet."
    },

    fr: {
        // Navigation & Header
        "nav.menu": "Menu",
        "nav.home": "Accueil",
        "nav.story": "Notre histoire",
        "nav.dishes": "Plats",
        "nav.jobs": "Emplois",
        "nav.locations": "Emplacement",
        "nav.contact": "Collaboration",
        "nav.order": "RÃ©server une table",
        "nav.logo_sub_title": "L'Ordre du GoÃ»t",

        // Hero Section
        "hero.title": "Fritzguard",
        "hero.subtitle": "frites de luxe",
        "hero.est": "FondÃ©e",
        "hero.year": "2022",

        // Story Section
        "story.heading": "notre histoire",
        "story.title": "Le Meilleur de la Belgique",
        "story.founding": "FondÃ©e en 2022",
        "story.location": "au cÅ“ur de Bruxelles, face Ã  la Bourse, Fritzguard Bruxelles est un projet passionnel familial.",
        "story.concept": "Nous avons imaginÃ© une cuisine belge ğŸ‡§ğŸ‡ª rÃ©inventÃ©e construite autour d'un concept unique : des frites chargÃ©es garnie de grands classiques belges",
        "story.concept_end": "rÃ©interprÃ©tÃ©s avec prÃ©cision et crÃ©ativitÃ©.",
        "story.recipes": "Vol-au-vent, joues de bÅ“uf, boulettes Ã  la liÃ©geoise, moules-fritesâ€¦ et bien d'autres : chaque recette a Ã©tÃ© crÃ©Ã©e, testÃ©e et perfectionnÃ©e pendant prÃ¨s de deux ans, aux cÃ´tÃ©s de chefs expÃ©rimentÃ©s.",
        "story.burgers": "Notre menu propose Ã©galement des burgers premium Ã  base de bÅ“uf Angus de qualitÃ© et de poulet, ainsi que des alternatives vÃ©gÃ©tariennes comme nos burgers au chou-fleur, pour satisfaire tous les palais.",
        "story.quality": "Chez Fritzguard, tout est fait maison, sans produits surgelÃ©s, en utilisant uniquement des ingrÃ©dients frais, locaux et 100% belges ğŸ‡§ğŸ‡ª.",
        "story.design": "ConÃ§u en collaboration avec des designers et architectes renommÃ©s, le projet combine authenticitÃ©, modernitÃ© et artisanat.",
        "story.today": "Aujourd'hui, Fritzguard est devenu une adresse incontournable de Bruxelles, avec l'ambition de grandir sans jamais trahir son ADN : la qualitÃ© avant tout.",
        "story.content": "FondÃ©e en 2022, au cÅ“ur de Bruxelles, face Ã  la Bourse, Fritzguard Bruxelles est un projet passionnel familial.<br><br>Nous avons imaginÃ© une cuisine belge ğŸ‡§ğŸ‡ª rÃ©inventÃ©e construite autour d'un concept unique : des frites chargÃ©es garnie de grands classiques belges, rÃ©interprÃ©tÃ©s avec prÃ©cision et crÃ©ativitÃ©.<br><br>Vol-au-vent, joues de bÅ“uf, boulettes Ã  la liÃ©geoise, moules-fritesâ€¦ et bien d'autres : chaque recette a Ã©tÃ© crÃ©Ã©e, testÃ©e et perfectionnÃ©e pendant prÃ¨s de deux ans, aux cÃ´tÃ©s de chefs expÃ©rimentÃ©s.<br><br>Notre menu propose Ã©galement des burgers premium Ã  base de bÅ“uf Angus de qualitÃ© et de poulet, ainsi que des alternatives vÃ©gÃ©tariennes comme nos burgers au chou-fleur, pour satisfaire tous les palais.<br><br>Chez Fritzguard, tout est fait maison, sans produits surgelÃ©s, en utilisant uniquement des ingrÃ©dients frais, locaux et 100% belges ğŸ‡§ğŸ‡ª.<br><br>ConÃ§u en collaboration avec des designers et architectes renommÃ©s, le projet combine authenticitÃ©, modernitÃ© et artisanat.<br><br>Aujourd'hui, Fritzguard est devenu une adresse incontournable de Bruxelles, avec l'ambition de grandir sans jamais trahir son ADN : la qualitÃ© avant tout.",

        // Menu Section
        "menu.label": "Menu",
        "menu.title": "plats signature",
        "menu.button": "dÃ©couvrir le menu complet",
        "menu.description": "Vol-au-vent, joues de bÅ“uf, boulettes Ã  la liÃ©geoise, moules-fritesâ€¦ et bien d'autres : chaque recette a Ã©tÃ© crÃ©Ã©e, testÃ©e et perfectionnÃ©e pendant prÃ¨s de deux ans, aux cÃ´tÃ©s de chefs expÃ©rimentÃ©s.\n\nNotre menu propose Ã©galement des burgers premium Ã  base de bÅ“uf Angus de qualitÃ© et de poulet, ainsi que des alternatives vÃ©gÃ©tariennes comme nos burgers au chou-fleur, pour satisfaire tous les palais.",

        // Jobs Section
        "jobs.heading": "Emplois",
        "jobs.title": "Rejoignez Notre Ã‰quipe",
        "jobs.paragraph1": "Nous recherchons toujours des individus passionnÃ©s qui partagent notre engagement envers l'excellence et la qualitÃ©. Que vous soyez chef, personnel de cuisine, serveur ou membre de notre Ã©quipe, nous croyons en la crÃ©ation d'un environnement oÃ¹ chacun peut s'Ã©panouir.",
        "jobs.paragraph2": "Chez Fritzguard, nous ne servons pas que des fritesâ€”nous servons une expÃ©rience. Rejoignez-nous et faites partie d'une Ã©quipe dÃ©vouÃ©e Ã  perfectionner chaque dÃ©tail, de l'approvisionnement des plus beaux ingrÃ©dients belges ğŸ‡§ğŸ‡ª Ã  la prestation d'un service exceptionnel Ã  nos clients.",
        "jobs.interested": "IntÃ©ressÃ© par rejoindre notre Ã©quipe ?",
        "jobs.contact": "Nous aimerions avoir de vos nouvelles ! N'hÃ©sitez pas Ã  nous contacter Ã ",
        "jobs.phone": "+32 2 331 00 29",
        "jobs.or": "ou",
        "jobs.sendInquiry": "envoyer votre demande Ã ",
        "jobs.email": "beloria.contact@gmail.com",
        "jobs.closing": "CrÃ©ons quelque chose d'exceptionnel ensemble !",

        // Collaboration Section
        "collab.heading": "COLLABORATION",
        "collab.title": "COLLABOREZ AVEC NOUS",
        "collab.content": "Fritzguard est plus qu'un restaurant, c'est un concept culinaire belge ğŸ‡§ğŸ‡ª moderne construit autour de frites signature et de grands classiques. Si vous avez des idÃ©es de collaboration ou des propositions, n'hÃ©sitez pas Ã  nous contacter: <br> +32 2 331 00 29<br />ou<br /> beloria.contact@gmail.com",

        // Locations Section
        "locations.heading": "localitÃ©s",
        "locations.title": "Visitez-nous",
        "locations.address": "Adresse",
        "locations.phone": "TÃ©lÃ©phone",
        "locations.email": "E-mail",

        // Browser Title
        "browser.title": "Vos frites refroidissent !",

        // Footer
        "footer.year": "Tous droits rÃ©servÃ©s",
        "footer.contact": "Contact",
        "footer.followUs": "Suivez-nous",

        // Accessibility
        "video.noSupport": "Votre navigateur ne supporte pas la balise vidÃ©o."
    }
};

/**
 * Translation Manager Class
 */
class TranslationManager {
    constructor(defaultLanguage = 'en') {
        this.currentLanguage = defaultLanguage;
        this.translations = translations;
        this.defaultLanguage = defaultLanguage;
    }

    /**
     * Get a translated string by key
     * @param {string} key - Translation key (e.g., 'hero.title')
     * @param {string} language - Optional language code (defaults to current language)
     * @returns {string} Translated text or key if not found
     */
    get(key, language = null) {
        const lang = language || this.currentLanguage;

        if (this.translations[lang] && this.translations[lang][key]) {
            return this.translations[lang][key];
        }

        // Fallback to default language
        if (this.translations[this.defaultLanguage] && this.translations[this.defaultLanguage][key]) {
            return this.translations[this.defaultLanguage][key];
        }

        console.warn(`Translation not found for key: ${key}`);
        return key;
    }

    /**
     * Set the current language
     * @param {string} language - Language code (en, nl, fr)
     */
    setLanguage(language) {
        if (this.translations[language]) {
            this.currentLanguage = language;
            localStorage.setItem('fritzguard_language', language);
            console.log('Translation: Language changed to:', language);
            this.updatePageTranslations();
            return true;
        }
        console.warn('Translation: Language not supported:', language);
        return false;
    }

    /**
     * Get current language
     * @returns {string} Current language code
     */
    getLanguage() {
        return this.currentLanguage;
    }

    /**
     * Get all available languages
     * @returns {string[]} Array of language codes
     */
    getAvailableLanguages() {
        return Object.keys(this.translations);
    }

    /**
     * Update all elements with data-i18n attribute
     * This function traverses the DOM and updates all elements with translation keys
     */
    updatePageTranslations() {
        const elements = document.querySelectorAll('[data-i18n]');

        elements.forEach((element) => {
            const key = element.getAttribute('data-i18n');
            const translation = this.get(key);

            // Check if element should have translation in specific attribute
            const attr = element.getAttribute('data-i18n-attr');

            if (attr) {
                // Update specific attribute
                element.setAttribute(attr, translation);
            } else {
                // Check if translation contains HTML (has <br>, <span>, etc.)
                const hasHTML = /<[a-z][\s\S]*>/i.test(translation);

                if (hasHTML) {
                    // Use innerHTML for content with HTML tags
                    element.innerHTML = translation;
                } else {
                    // Use textContent for plain text
                    element.textContent = translation;
                }
            }
        });

        // Update HTML title
        const titleKey = document.documentElement.getAttribute('data-i18n-title');
        if (titleKey) {
            document.title = this.get(titleKey);
        }

        // Dispatch custom event for other scripts to listen
        window.dispatchEvent(new CustomEvent('languageChanged', {
            detail: { language: this.currentLanguage }
        }));
    }

    /**
     * Initialize translation manager from localStorage or browser language
     */
    initialize() {
        // Check localStorage for saved language
        const savedLanguage = localStorage.getItem('fritzguard_language');

        if (savedLanguage && this.translations[savedLanguage]) {
            this.currentLanguage = savedLanguage;
            console.log('Translation: Loaded saved language from localStorage:', savedLanguage);
        } else {
            // Try to use browser language
            const browserLang = navigator.language.substring(0, 2);
            if (this.translations[browserLang]) {
                this.currentLanguage = browserLang;
                console.log('Translation: Detected browser language:', browserLang);
            } else {
                console.log('Translation: Browser language not supported, using default: en');
            }
        }

        // Update page translations
        this.updatePageTranslations();
    }

    /**
     * Translate a key and optionally replace variables
     * @param {string} key - Translation key
     * @param {object} variables - Variables to replace in translation (optional)
     * @returns {string} Translated text with variables replaced
     */
    translate(key, variables = {}) {
        let text = this.get(key);

        // Replace variables in format {variableName}
        Object.keys(variables).forEach((varName) => {
            text = text.replace(new RegExp(`{${varName}}`, 'g'), variables[varName]);
        });

        return text;
    }
}

// Create global instance
window.i18n = new TranslationManager('en');

// Initialize when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        console.log('DOMContentLoaded - Starting initialization');
        window.i18n.initialize();
        // Ensure buttons are rendered before setting up switcher
        setTimeout(() => {
            console.log('Setting up language switcher, current lang:', window.i18n.getLanguage());
            setupLanguageSwitcher();
            updateGoogleMapsLinks();
        }, 50);
    });
} else {
    console.log('DOM already loaded - Starting initialization');
    window.i18n.initialize();
    // Ensure buttons are rendered before setting up switcher
    setTimeout(() => {
        console.log('Setting up language switcher, current lang:', window.i18n.getLanguage());
        setupLanguageSwitcher();
        updateGoogleMapsLinks();
    }, 50);
}

/**
 * Setup language switcher UI
 * Connects the existing language switcher buttons to the translation system
 */
function setupLanguageSwitcher() {
    const langSwitchers = document.querySelectorAll('.lang-switcher_wrapper [data-lang]');
    console.log('Found language switcher buttons:', langSwitchers.length);

    if (langSwitchers.length === 0) {
        console.warn('âš ï¸ Language switcher elements not found in DOM');
        console.warn('Looking for: .lang-switcher_wrapper [data-lang]');
        return;
    }

    // First, update active button state
    updateActiveLangButton();

    // Then attach click listeners
    langSwitchers.forEach((langButton) => {
        langButton.addEventListener('click', function (e) {
            e.preventDefault();
            const selectedLang = this.getAttribute('data-lang');
            console.log('Language button clicked:', selectedLang);
            window.i18n.setLanguage(selectedLang);
            updateActiveLangButton();
            updateGoogleMapsLinks();
        });
    });

    console.log('âœ“ Language switcher setup complete');
}

/**
 * Update active language button styling based on current language
 * Reads from localStorage and applies .active class to matching button
 */
function updateActiveLangButton() {
    const currentLang = window.i18n.getLanguage();
    const langButtons = document.querySelectorAll('.lang-switcher_wrapper [data-lang]');

    console.log('updateActiveLangButton() - Current language:', currentLang);
    console.log('updateActiveLangButton() - Found buttons:', langButtons.length);

    if (langButtons.length === 0) {
        console.warn('âš ï¸ No language buttons found to update');
        return;
    }

    let foundActive = false;
    langButtons.forEach((button) => {
        const buttonLang = button.getAttribute('data-lang');
        button.classList.remove('active');

        if (buttonLang === currentLang) {
            button.classList.add('active');
            foundActive = true;
            console.log('âœ“ Added .active class to button:', buttonLang);
        }
    });

    if (!foundActive) {
        console.warn('âš ï¸ No matching button found for language:', currentLang);
    }
}

/**
 * Update Google Maps reservation links based on current language
 * Changes the hl parameter to match the selected language
 */
function updateGoogleMapsLinks() {
    const currentLang = window.i18n.getLanguage();
    const languageMap = {
        'en': 'en-BE',
        'nl': 'nl-BE',
        'fr': 'fr-BE'
    };

    const hlParam = languageMap[currentLang] || 'en-BE';
    const mapsLinks = document.querySelectorAll('[data-google-maps-reserve]');

    mapsLinks.forEach((link) => {
        const href = link.getAttribute('href');
        // Replace or add the hl parameter
        const urlObj = new URL(href);
        urlObj.searchParams.set('hl', hlParam);
        link.setAttribute('href', urlObj.toString());
        console.log('âœ“ Updated Google Maps link hl parameter to:', hlParam);
    });
}

// Export for module systems
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { TranslationManager, translations };
}
